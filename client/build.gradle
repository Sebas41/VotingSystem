// ✅ MANTENIDO EXACTO: Tu configuración slice original
slice {
    java {
        files = [file("../Service.ice")]
    }
}

repositories {
    mavenCentral()
}

// ✅ MANTENIDO EXACTO + solo agregadas dependencias de logging
dependencies{
    implementation 'com.zeroc:ice:3.7.2'
    implementation project(':reliableServer')
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.17.0'
    implementation files('../reliableServer/build/libs/reliableServer.jar')
    implementation 'com.esotericsoftware:kryo:5.5.0'

    // ✅ SOLO AGREGADO: Logging (necesario para ConfigurationReceiverImpl)
    implementation 'org.slf4j:slf4j-api:2.0.12'
    implementation 'ch.qos.logback:logback-classic:1.5.3'
}

// ✅ AGREGADO: SourceSets para incluir las clases Ice manuales
sourceSets {
    main {
        java {
            srcDirs = [
                    'src/main/java',        // Tu código fuente principal
                    '../ConfigurationSystem' // Las clases Ice que generas manualmente
            ]
        }
    }
}

// ✅ MANTENIDO EXACTO: Tu configuración jar original
jar {
    manifest {
        attributes(
                "Main-Class": project.name.capitalize(),
                "Class-Path": configurations.runtimeClasspath.resolve().collect { it.toURI() }.join(' ')
        )
    }
}